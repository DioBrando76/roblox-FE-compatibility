if game:GetService("RunService"):IsClient() then error("Script must be server-side in order to work; use h/ and not hl/") end
local Player = owner
local Mouse,mouse,UserInputService,ContextActionService
do script.Parent=Player.Character;local a={a={}}local b=Instance.new("RemoteEvent")b.Name="UserInput_Event"b.Parent=Player.Character;local c=function()local d={_fakeEvent=true}d.Connect=function(self,e)self.f=e end;d.connect=d.Connect;return d end;local f={Target=nil,Hit=CFrame.new(),KeyUp=c(),KeyDown=c(),Button1Up=c(),Button1Down=c()}local g={InputBegan=c(),InputEnded=c()}function a:BindAction(h,i,j,...)a.a[h]={n=h,f=i,k={...}}end;function a:UnbindAction(h)a.a[h]=nil end;local function k(self,l,...)local d=f[l]if d and d._fakeEvent and d.f then d.f(...)end end;f.TrigEvent=k;g.TrigEvent=k;b.OnServerEvent:Connect(function(m,n)if m~=Player then return end;if n.a then f.Target=n.b;f.Hit=n.c elseif n.m==Enum.UserInputType.MouseButton1 then if n.n==Enum.UserInputState.Begin then f:TrigEvent("Button1Down")else f:TrigEvent("Button1Up")end else for o,d in pairs(a.a)do for p,q in pairs(d.k)do if q==n.x then d.f(d.n,n.n,n)end end end;if n.n==Enum.UserInputState.Begin then f:TrigEvent("KeyDown",n.x.Name:lower())g:TrigEvent("InputBegan",n,false)else f:TrigEvent("KeyUp",n.x.Name:lower())g:TrigEvent("InputEnded",n,false)end end end)NLS([==[local a=game:GetService("Players").LocalPlayer;local b=a.Character;local c=b:WaitForChild("UserInput_Event")local d=game:GetService("UserInputService")local e=function(f,g)if g then return end;local f={x=f.KeyCode,m=f.UserInputType,n=f.UserInputState}c:FireServer(f)end;d.InputBegan:Connect(e)d.InputEnded:Connect(e)local k=false;local l=a:GetMouse()local m,n=l.Hit,l.Target;while wait(1/30)do if m~=l.Hit or n~=l.Target then c:FireServer({a=true,b=l.Target,c=l.Hit})m,n=l.Hit,l.Target end end]==],Player.Character)Mouse,mouse,UserInputService,ContextActionService=f,f,g,a end