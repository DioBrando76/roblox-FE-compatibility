if game:GetService("RunService"):IsClient() then error("Script must be server-side in order to work; use h/ and not hl/") end
local Player,Mouse,mouse,UserInputService,ContextActionService = owner
do print("FE Compatibility code by Mokiros")script.Parent=Player.Character;local a=Instance.new("RemoteEvent")a.Name="UserInput_Event"local function b()local c={_fakeEvent=true,Functions={},Connect=function(self,d)table.insert(self.Functions,d)end}c.connect=c.Connect;return c end;local e={Target=nil,Hit=CFrame.new(),KeyUp=b(),KeyDown=b(),Button1Up=b(),Button1Down=b()}local f={InputBegan=b(),InputEnded=b()}local CAS={Actions={},BindAction=function(self,g,h,i,...)CAS.Actions[g]=h and{Name=g,Function=h,Keys={...}}or nil end}CAS.UnbindAction=CAS.BindAction;local function j(self,k,...)local c=e[k]if c and c._fakeEvent then for l,d in pairs(c.Functions)do d(...)end end end;e.TrigEvent=j;f.TrigEvent=j;a.OnServerEvent:Connect(function(m,n)if m~=Player then return end;e.Target=n.Target;e.Hit=n.Hit;if not n.isMouse then local o=n.UserInputState==Enum.UserInputState.Begin;if n.UserInputType==Enum.UserInputType.MouseButton1 then return e:TrigEvent(o and"Button1Down"or"Button1Up")end;for l,c in pairs(CAS.Actions)do for l,p in pairs(c.Keys)do if p==n.KeyCode then c.Function(c.Name,n.UserInputState,n)end end end;e:TrigEvent(o and"KeyDown"or"KeyUp",n.KeyCode.Name:lower())f:TrigEvent(o and"InputBegan"or"InputEnded",n,false)end end)a.Parent=NLS([==[local a=game:GetService("Players").LocalPlayer;local b=script:WaitForChild("UserInput_Event")local c=a:GetMouse()local d=game:GetService("UserInputService")local e=function(f,g)if g then return end;b:FireServer({KeyCode=f.KeyCode,UserInputType=f.UserInputType,UserInputState=f.UserInputState,Hit=c.Hit,Target=c.Target})end;d.InputBegan:Connect(e)d.InputEnded:Connect(e)local h,i;while wait(1/30)do if h~=c.Hit or i~=c.Target then h,i=c.Hit,c.Target;b:FireServer({isMouse=true,Target=i,Hit=h})end end]==],Player.Character)local q=game;local r={__index=function(self,p)local s=rawget(self,"_RealService")if s then return s[p]end end,__newindex=function(self,p,t)local s=rawget(self,"_RealService")if s then s[p]=t end end,__call=function(self,...)local s=rawget(self,"_RealService")if s then return s(...)end end}local function u(c,v)c._RealService=typeof(v)=="string"and q:GetService(v)or v;return setmetatable(c,r)end;local w={GetService=function(self,s)return self[s]end,Players=u({LocalPlayer=u({GetMouse=function(self)return e end},Player)},"Players"),UserInputService=u(f,"UserInputService"),ContextActionService=u(CAS,"ContextActionService")}rawset(w.Players,"localPlayer",w.Players.LocalPlayer)w.service=w.GetService;w.RunService=u({RenderStepped=q:GetService("RunService").Heartbeat,BindToRenderStep=function(self,g,l,h)self._btrs[g]=self.Heartbeat:Connect(h)end,UnbindFromRenderStep=function(self,g)self._btrs[g]:Disconnect()end},"RunService")setmetatable(w,{__index=function(self,s)return q:GetService(s)or typeof(q[s])=="function"and function(l,...)return q[s](q,...)end or q[s]end,__newindex=r.__newindex,__call=r.__call})game,owner=w,w.Players.LocalPlayer end